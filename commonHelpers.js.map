{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst options = {\n    key: '43845947-8a1e30f8a3261d274f42ac52c',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: 1,\n};\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport const fetchPick = async (value, pages) => {\n    let params = `?key=${options.key}&q=${value}&image_type=${options.image_type}&orientation=${options.orientation}&safesearch=${options.safesearch}&per_page=${options.per_page}&page=${pages}`\n    const response = await axios.get(`${BASE_URL}${params}`);\n    return response;\n};","const listEl = document.querySelector('.img-list');\n\nexport const marcup = (array) => {\n    const gallery = array.map(img => {\n        return `\n                <li class=\"img-item\">\n                <a class=\"img-link\" href=${img.largeImageURL}>\n                <img src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\"\n                data-source=\"${img.largeImageURL}\" \n                class=\"img\">\n                </a>\n                <div class=\"img-text-box\">\n                <div class=\"img-text\">\n                <h4 class=\"img-text-title\">Likes</h4>\n                <p class=\"img-text-par\">${img.likes}</p>\n                </div>\n                <div class=\"img-text\">\n                <h4 class=\"img-text-title\">Views</h4>\n                <p class=\"img-text-par\">${img.views}</p>\n                </div>\n                <div class=\"img-text\">\n                <h4 class=\"img-text-title\">Comments</h4>\n                <p class=\"img-text-par\">${img.comments}</p>\n                </div>\n                <div class=\"img-text\">\n                <h4 class=\"img-text-title\">Downloads</h4>\n                <p class=\"img-text-par\">${img.downloads}</p>\n                </div>\n                </div>\n                </li>`\n    }).join('');\n    listEl.insertAdjacentHTML('beforeend', gallery);\n\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// -----------------------------\nconst inputEl = document.querySelector('.input');\nconst buttonEL = document.querySelector('.form-btn');\nconst formEl = document.querySelector('.box');\nconst listEl = document.querySelector('.img-list');\nconst loader = document.querySelector('.this');\nconst showMoreEl = document.querySelector('.load-more-btn');\nlet showMoreValue = '';\nlet currentPage = 1;\nlet valueImp = \"\";\nlet allPages = null;\nlet scrollHeight = null;\nconst lightBox = new SimpleLightbox('.img-list a', {\n    captionsData: 'alt',\n    captionsDelay: 250,\n    overlayOpacity: 0,\n  });\n\nimport { fetchPick } from \"./js/pixabay-api\";\nimport { marcup } from \"./js/render-functions\";\n\n\nconst sendForm = (event) => {\n    showMoreEl.addEventListener('click', showMore);\n    showMoreEl.classList.add('d-none');\n    currentPage = 1;\n    listEl.innerHTML = \"\";\n    event.currentTarget.reset();\n    event.preventDefault();\n    if (valueImp === \"\") {\n        return\n    };\n\n\n    loader.classList.add('loader')\n    fetchPick(valueImp, currentPage)\n    .then (\n        imgs =>{ \n            loader.classList.remove('loader')\n            allPages = Math.ceil(imgs.data.total / 15);\n            if (imgs.data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    maxWidth: '300px',\n                });\n                return\n            }\n            marcup(imgs.data.hits);\n            lightBox.refresh();\n            if (allPages > 1) {\n                showMoreEl.classList.remove('d-none')\n            };\n        })\n        .catch(error => {\n            iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    maxWidth: '300px',\n                });\n        });\nshowMoreValue = valueImp;   \nvalueImp = \"\";\n};\nformEl.addEventListener(\"submit\", sendForm);\n\n\nconst giveValue = (event) => {\n    valueImp = event.currentTarget.value;\n};\ninputEl.addEventListener(\"input\", giveValue);\nlightBox.refresh();\n\nconst scrollDown = () => {\n    const lastImg = document.querySelector('.img-item:last-child')\n    let rect = lastImg.getBoundingClientRect();\n    scrollHeight = rect.height * 2;\n    window.scrollBy({\n        top: scrollHeight,\n        left: 0,\n        behavior: \"smooth\",\n    });\n};\n\nconst showMore = () => {\n    \n    currentPage += 1;\n    showMoreEl.classList.add('d-none');\n    loader.classList.add('loader');\n    fetchPick(showMoreValue, currentPage)\n    .then(imgs => {\n        loader.classList.remove('loader');\n        marcup(imgs.data.hits);\n        showMoreEl.classList.remove('d-none');\n        lightBox.refresh();\n        scrollDown();\n        if (currentPage === allPages) {\n            showMoreEl.removeEventListener('click', showMore)\n            showMoreEl.classList.add('d-none');\n            iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                maxWidth: '300px',\n            });\n            return;\n        };\n    }).catch(error => {\n        iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    maxWidth: '300px',\n                });\n    });\n        \n        \n}\nshowMoreEl.addEventListener('click', showMore);"],"names":["options","BASE_URL","fetchPick","value","pages","params","axios","listEl","marcup","array","gallery","img","inputEl","formEl","loader","showMoreEl","showMoreValue","currentPage","valueImp","allPages","scrollHeight","lightBox","SimpleLightbox","sendForm","event","showMore","imgs","iziToast","error","giveValue","scrollDown"],"mappings":"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"}